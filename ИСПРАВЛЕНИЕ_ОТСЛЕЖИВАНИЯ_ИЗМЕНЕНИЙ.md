# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–¢–°–õ–ï–ñ–ò–í–ê–ù–ò–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ô –ó–ê–í–ï–†–®–ï–ù–û

## üîß **–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞:**
**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏**

## üîç **–ü—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º:**

### 1. **üö´ –°—Ç—Ä–æ–≥–æ–µ —É—Å–ª–æ–≤–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**
```python
# –ë–´–õ–û (–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è):
if chat_id not in self.alarm_enabled_chats and chat_id != self.target_group_id:
    return
```

### 2. **üéØ target_group_id –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è**
- –ê–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –≥—Ä—É–ø–ø—ã "–ö—Ä–∞—Å–∞–≤—á–∏–∫–∏ 2.0" –Ω–µ –≤—Å–µ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞
- ID –≥—Ä—É–ø–ø—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### 3. **‚öôÔ∏è –ù–µ–Ω–∞–¥–µ–∂–Ω—ã–π EditedMessageHandler**
- –û–¥–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–≥ –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ edited_message updates

---

## ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### 1. **üéØ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–µ–≤–æ–π –≥—Ä—É–ø–ø—ã**
```python
# –°–¢–ê–õ–û (–±–æ–ª–µ–µ –≥–∏–±–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞):
chat_title = getattr(update.effective_chat, 'title', '')
is_target_group = (chat_id == self.target_group_id or 
                  (chat_title and '–∫—Ä–∞—Å–∞–≤—á–∏–∫–∏' in chat_title.lower()))

if chat_id not in self.alarm_enabled_chats and not is_target_group:
    return
```

### 2. **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º edited_message
if not self.target_group_id:
    await self.auto_setup_target_group(update, context)
```

### 3. **üõ°Ô∏è –î–≤–æ–π–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
```python
# –°–ø–æ—Å–æ–± 1: MessageHandler —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
self.application.add_handler(MessageHandler(filters.ALL, edited_wrapper), group=1)

# –°–ø–æ—Å–æ–± 2: BaseHandler –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
self.application.add_handler(EditedMessageHandler(edited_wrapper))
```

### 4. **üìù –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
```python
print(f"üîÑ –ü–æ–ª—É—á–µ–Ω update —Å edited_message: {bool(update.edited_message)}")
print(f"‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ {chat_id} ({chat_title})")
```

---

## üß™ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:**

### ‚úèÔ∏è **–¢–µ—Å—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

1. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** –≤ –≥—Ä—É–ø–ø–µ "–ö—Ä–∞—Å–∞–≤—á–∏–∫–∏ 2.0"
2. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 —Å–µ–∫—É–Ω–¥—ã** (—á—Ç–æ–±—ã —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–ª–æ—Å—å)
3. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
üîÑ –ü–æ–ª—É—á–µ–Ω update —Å edited_message: true
‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ -1001846960686 (–ö—Ä–∞—Å–∞–≤—á–∏–∫–∏ 2.0)

‚ö†Ô∏è –°–û–û–ë–©–ï–ù–ò–ï –û–¢–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–û

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: @–≤–∞—à_username
üïê –í—Ä–µ–º—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: 13:00:15
üìÑ ID —Å–æ–æ–±—â–µ–Ω–∏—è: 12345

üìú –ë—ã–ª–æ: –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
üìù –°—Ç–∞–ª–æ: –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
```

### üîç **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:**
```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
üîÑ –ü–æ–ª—É—á–µ–Ω update —Å edited_message: true
‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ ...
```

---

## ‚öôÔ∏è **–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:**

- **ü§ñ –ë–æ—Ç:** ‚úÖ –ó–ê–ü–£–©–ï–ù (PID 3079)
- **üìù –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
- **üóëÔ∏è –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏–π:** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢  
- **üéØ –ê–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä—É–ø–ø—ã:** ‚úÖ –£–õ–£–ß–®–ï–ù–ê
- **üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –†–ê–°–®–ò–†–ï–ù–û

---

## üö® **–ï—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤—Å–µ –µ—â–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç:**

### 1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:**
```bash
# –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:
üîÑ –ü–æ–ª—É—á–µ–Ω update —Å edited_message: true
‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...
```

### 2. **–ï—Å–ª–∏ –ª–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:
pkill -f alarm_bot.py
python3 alarm_bot.py &
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**
```bash
# –í Telegram:
/alarm_status
/enable_alarm  # –µ—Å–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–æ
```

### 4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã:**
- –ì—Ä—É–ø–ø–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–æ–≤–æ "–∫—Ä–∞—Å–∞–≤—á–∏–∫–∏" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏
- –ò–ª–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π `/enable_alarm`

---

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

**‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ–æ–±—â–µ–Ω–∏–π –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–ê!**

- **üîÑ –î–≤–æ–π–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- **üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** –¥–ª—è –≥—Ä—É–ø–ø—ã "–ö—Ä–∞—Å–∞–≤—á–∏–∫–∏ 2.0"  
- **üìù –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- **üõ°Ô∏è –†–µ–∑–µ—Ä–≤–Ω—ã–π –ø–æ–∏—Å–∫** –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ –ª–æ–≥–∞—Ö

**–¢–µ–ø–µ—Ä—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –Ω–∞–¥–µ–∂–Ω–æ!** üéâ 